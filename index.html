<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>aiko ã‚»ãƒˆãƒªæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ </title>
  <style>
    :root {
      --primary-color: #d81b60;
      --primary-light: #f06292;
      --bg-color: #fce4ec;
      --text-color: #333;
      --border-radius: 8px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 15px;
      line-height: 1.5;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    h1 {
      color: var(--primary-color);
      text-align: center;
      font-size: 24px;
      border-bottom: 2px solid var(--primary-light);
      padding-bottom: 10px;
      margin-top: 0;
      margin-bottom: 25px;
    }

    .section {
      margin-bottom: 30px;
    }

    .section-title {
      font-size: 18px;
      font-weight: bold;
      color: #c2185b;
      margin-bottom: 15px;
      border-left: 4px solid var(--primary-color);
      padding-left: 10px;
    }

    /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
    select, input[type="file"], input[type="text"] {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      background-color: #fafafa;
      font-size: 16px; /* ã‚¹ãƒãƒ›ã§èª­ã¿ã‚„ã™ã„ã‚µã‚¤ã‚º */
      box-sizing: border-box;
      margin-bottom: 15px;
      appearance: none; /* ã‚¹ãƒãƒ›ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ */
    }

    select {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 16px;
    }

    input[type="file"] {
      padding: 10px;
      background-color: white;
    }

    .live-details {
      background-color: #fce4ec;
      border: 1px dashed var(--primary-light);
      border-radius: 6px;
      padding: 12px;
      margin-top: -5px;
      font-size: 14px;
      color: #555;
      line-height: 1.4;
    }

    /* ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ */
    #setlist-container {
      counter-reset: song-counter;
      /* ã‚¹ãƒãƒ›ã§ã¯å·¦å´ã®ä½™ç™½ã‚’å°‘ã—æ¸›ã‚‰ã™ */
      padding-left: 0; 
    }

    .song-entry {
      border: 1px solid #eee;
      border-radius: var(--border-radius);
      padding: 15px 15px 15px 40px; /* å·¦å´ã«ç•ªå·ç”¨ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
      margin-bottom: 20px;
      background-color: #fff9fa;
      position: relative;
    }

    .song-entry::before {
      counter-increment: song-counter;
      content: counter(song-counter);
      position: absolute;
      left: 5px; /* ã‚«ãƒ¼ãƒ‰ã®å†…å´ã«é…ç½® */
      top: 15px;
      font-size: 14px;
      font-weight: bold;
      color: #fff;
      background-color: var(--primary-light);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      line-height: 24px;
      text-align: center;
    }

    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ»ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³å‘¨ã‚Š */
    .checkbox-group, .radio-group {
      margin-top: 15px;
    }

    .checkbox-group label, .radio-group label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-weight: normal;
      font-size: 15px;
      cursor: pointer;
      padding: 5px 0;
    }

    /* ã‚«ã‚¹ã‚¿ãƒ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ»ãƒ©ã‚¸ã‚ªã®ã‚µã‚¤ã‚ºèª¿æ•´ */
    input[type="checkbox"], input[type="radio"] {
      width: 24px;
      height: 24px;
      margin-right: 10px;
      margin-left: 0;
      flex-shrink: 0;
      accent-color: var(--primary-color); /* ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ */
      transform: none; /* ä»¥å‰ã®scaleæ‹¡å¤§ã‚’ãƒªã‚»ãƒƒãƒˆ */
    }

    .radio-group {
      display: flex;
      flex-direction: column; /* ã‚¹ãƒãƒ›ã§ã¯ç¸¦ä¸¦ã³ã®æ–¹ãŒæŠ¼ã—ã‚„ã™ã„ */
      gap: 5px;
    }

    .radio-group-title {
      font-size: 14px;
      font-weight: bold;
      color: #666;
      display: block;
      margin-bottom: 8px;
    }

    /* ãƒœã‚¿ãƒ³é¡ */
    .btn {
      padding: 14px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 10px;
      text-align: center;
    }

    .btn:active {
      opacity: 0.8;
    }

    .btn:disabled {
      background-color: #ccc !important;
      cursor: not-allowed;
    }

    .btn-primary { background-color: var(--primary-color); color: white; }
    .btn-secondary { background-color: #757575; color: white; }
    .btn-add { background-color: #ec407a; color: white; margin-top: 5px; }

    .btn-delete {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ffebee;
      color: #c62828;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-weight: bold;
      cursor: pointer;
      line-height: 32px;
      text-align: center;
      font-size: 18px;
      padding: 0;
    }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
    #loader, #modal-overlay, #success-modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      backdrop-filter: blur(2px);
    }

    #loader-content, #modal-content, #success-modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      width: 85%;
      max-width: 500px;
      max-height: 85vh;
      overflow-y: auto;
      box-sizing: border-box;
      font-size: 16px;
    }

    #loader-message { font-size: 16px; font-weight: bold; }
    #modal-content h2, #success-modal-content h2 { font-size: 20px; color: var(--primary-color); margin-top: 0; }
    
    #confirmation-preview { text-align: left; font-size: 15px; }
    #confirmation-preview h3 { font-size: 16px; border-bottom: 1px solid #eee; margin-top: 15px; padding-bottom: 5px; }
    #confirmation-preview ol { padding-left: 25px; }
    #confirmation-preview li { margin-bottom: 8px; }

    #image-preview, #confirmation-image-preview {
      max-width: 100%;
      height: auto;
      margin-top: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    #success-modal-content p { text-align: left; line-height: 1.6; font-size: 15px; }
    #success-modal-content a { color: var(--primary-color); text-decoration: underline; font-weight: bold; }

  </style>
</head>
<body>
  <div class="container">
    <h1>aiko ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ </h1>
    <form id="setlist-form">

      <!-- A. ãƒ©ã‚¤ãƒ–æƒ…å ± -->
      <div class="section">
        <div class="section-title">ãƒ©ã‚¤ãƒ–æƒ…å ±</div>
        <select id="live-select" name="live-select" required>
          <option value="">-- èª­ã¿è¾¼ã¿ä¸­... --</option>
        </select>
        <div id="live-details" class="live-details" style="display: none;"></div>
      </div>

      <!-- B. æŠ•ç¨¿è€…æƒ…å ± -->
      <div class="section">
        <div class="section-title">æŠ•ç¨¿è€… (ä»»æ„)</div>
        <input type="text" id="submitter-name" placeholder="ãŠåå‰ã‚’å…¥åŠ›ã§ãã¾ã™">
      </div>

      <!-- C. ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆæƒ…å ± -->
      <div class="section">
        <div class="section-title">ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆæƒ…å ±</div>
        <div id="setlist-container"></div>
        <button type="button" class="btn btn-add" onclick="addSongEntry()">ï¼‹ æ›²ã‚’è¿½åŠ </button>
      </div>

      <!-- D. ç”»åƒæ·»ä»˜ -->
      <div class="section">
        <div class="section-title">ã‚»ãƒˆãƒªãƒœãƒ¼ãƒ‰ç”»åƒ (ä»»æ„)</div>
        <input type="file" id="image-file" accept="image/*">
        <canvas id="image-canvas" style="display:none;"></canvas>
        <img id="image-preview" style="display: none;">
      </div>

      <button type="button" class="btn btn-primary" onclick="showConfirmation()">ç¢ºèªç”»é¢ã¸é€²ã‚€</button>
    </form>
  </div>

  <!-- æ›²å…¥åŠ›æ¬„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ -->
  <template id="song-entry-template">
    <div class="song-entry">
      <button type="button" class="btn-delete" onclick="this.parentElement.remove()">Ã—</button>
      <select class="song-select">
        <option value="">-- æ›²ã‚’é¸æŠã—ã¦ãã ã•ã„ --</option>
      </select>
      <div class="checkbox-group">
        <label><input type="checkbox" class="is-medley"><span>ã“ã®æ›²ã¯ãƒ¡ãƒ‰ãƒ¬ãƒ¼</span></label>
      </div>
      <div class="radio-group">
        <span class="radio-group-title">ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«æŒ‡å®š:</span>
        <label><input type="radio" name="encore-radio" value="none" checked><span>æŒ‡å®šãªã—</span></label>
        <label><input type="radio" name="encore-radio" value="_ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« #1"><span>ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« ï¼‘å›ç›®</span></label>
        <label><input type="radio" name="encore-radio" value="_ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« #2"><span>ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« ï¼’å›ç›®</span></label>
        <label><input type="radio" name="encore-radio" value="_ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« #3"><span>ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« ï¼“å›ç›®</span></label>
        <label><input type="radio" name="encore-radio" value="_ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« #4"><span>ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« ï¼”å›ç›®</span></label>
        <label><input type="radio" name="encore-radio" value="_ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« #5"><span>ã‚¢ãƒ³ã‚³ãƒ¼ãƒ« ï¼•å›ç›®</span></label>
      </div>
    </div>
  </template>

  <!-- å„ç¨®ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="loader"><div id="loader-content"><p id="loader-message">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p></div></div>
  
  <div id="modal-overlay">
    <div id="modal-content">
      <h2>å…¥åŠ›å†…å®¹ã®ç¢ºèª</h2>
      <div id="confirmation-preview"></div>
      <div style="margin-top: 20px;">
        <button type="button" class="btn btn-primary" id="submit-button" onclick="submitData()">ã“ã®å†…å®¹ã§æŠ•ç¨¿ã™ã‚‹</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal()">ä¿®æ­£ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <div id="success-modal-overlay">
    <div id="success-modal-content">
      <h2>æŠ•ç¨¿å®Œäº†</h2>
      <p id="success-message"></p>
      <button type="button" class="btn btn-primary" onclick="closeSuccessModal()">é–‰ã˜ã‚‹</button>
    </div>
  </div>

  <script>
    // â–¼â–¼â–¼ ã“ã“ã«GASã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªURLã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ â–¼â–¼â–¼
    const GAS_API_URL = "https://script.google.com/macros/s/AKfycbxmxttUQvjW6Gm3vCOdkjwwGbbfgADozI3MU869GGEFjRqLfo8ppPBz_F5F-_ShrY3c/exec";
    // â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²

    let sheetData = { liveInfo: [], songList: [] };

    window.addEventListener('load', function() {
      showLoader('ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...');
      fetchData();
      document.getElementById('image-file').addEventListener('change', handleImageUpload);
    });

    // ãƒ‡ãƒ¼ã‚¿ã®å–å¾— (fetch APIä½¿ç”¨)
    function fetchData() {
      fetch(GAS_API_URL)
        .then(response => response.json())
        .then(data => {
          sheetData = data;
          initializeForm();
        })
        .catch(error => {
          alert('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n' + error);
          hideLoader();
        });
    }

    function initializeForm() {
      const liveSelect = document.getElementById('live-select');
      liveSelect.innerHTML = '<option value="">-- ãƒ©ã‚¤ãƒ–ã‚’é¸æŠã—ã¦ãã ã•ã„ --</option>';

      sheetData.liveInfo.forEach((live, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = live.display;
        liveSelect.appendChild(option);
      });

      addSongEntry();
      hideLoader();
    }

    // ç”»åƒåœ§ç¸®ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å‡¦ç†
    function handleImageUpload(event) {
        const file = event.target.files[0];
        if (!file || !file.type.startsWith('image/')) {
            document.getElementById('image-preview').style.display = 'none';
            return;
        }

        const reader = new FileReader();
        reader.onload = function(e) {
            const img = new Image();
            img.onload = function() {
                const canvas = document.getElementById('image-canvas');
                const ctx = canvas.getContext('2d');
                const MAX_WIDTH = 1000;
                const MAX_HEIGHT = 1000;
                let width = img.width;
                let height = img.height;

                if (width > height) {
                    if (width > MAX_WIDTH) { height *= MAX_WIDTH / width; width = MAX_WIDTH; }
                } else {
                    if (height > MAX_HEIGHT) { width *= MAX_HEIGHT / height; height = MAX_HEIGHT; }
                }
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);

                const preview = document.getElementById('image-preview');
                preview.src = canvas.toDataURL('image/jpeg', 0.7);
                preview.style.display = 'block';
            }
            img.src = e.target.result;
        }
        reader.readAsDataURL(file);
    }

    // ãƒ©ã‚¤ãƒ–é¸æŠæ™‚ã®è©³ç´°è¡¨ç¤º
    document.getElementById('live-select').addEventListener('change', function() {
      const liveDetails = document.getElementById('live-details');
      if (this.value === "") {
        liveDetails.style.display = 'none';
        return;
      }
      const selectedLive = sheetData.liveInfo[this.value];
      liveDetails.textContent = `${selectedLive.region}ï¼š${selectedLive.venue}`;
      liveDetails.style.display = 'block';
    });

    // æ›²å…¥åŠ›æ¬„ã®è¿½åŠ 
    function addSongEntry() {
      const template = document.getElementById('song-entry-template');
      const clone = template.content.cloneNode(true);
      const songSelect = clone.querySelector('.song-select');
      
      sheetData.songList.forEach(song => {
        const option = document.createElement('option');
        option.value = song.title;
        option.textContent = song.title;
        songSelect.appendChild(option);
      });
      
      const uniqueName = 'encore-radio-' + Date.now() + Math.random();
      clone.querySelectorAll('input[name="encore-radio"]').forEach(radio => radio.name = uniqueName);
      
      document.getElementById('setlist-container').appendChild(clone);
    }

    // ç¢ºèªç”»é¢è¡¨ç¤º
    function showConfirmation() {
        const liveSelect = document.getElementById('live-select');
        if (liveSelect.value === "") { alert('é–‹å‚¬æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'); return; }

        const selectedLive = sheetData.liveInfo[liveSelect.value];
        let previewHtml = `<h3>ãƒ©ã‚¤ãƒ–æƒ…å ±</h3><p>${selectedLive.display}<br>${selectedLive.region}ï¼š${selectedLive.venue}</p>`;
        
        const submitter = document.getElementById('submitter-name').value;
        if (submitter) previewHtml += `<h3>æŠ•ç¨¿è€…</h3><p>${submitter}</p>`;

        previewHtml += '<h3>ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ</h3><ol>';
        const songEntries = document.querySelectorAll('.song-entry');
        let hasSong = false;
        songEntries.forEach(entry => {
            const songTitle = entry.querySelector('.song-select').value;
            if (songTitle) {
                hasSong = true;
                const isMedley = entry.querySelector('.is-medley').checked ? ' (ãƒ¡ãƒ‰ãƒ¬ãƒ¼)' : '';
                const encoreRadio = entry.querySelector('input[name^="encore-radio"]:checked');
                const encoreLabel = encoreRadio.nextElementSibling.textContent;
                // è¡¨ç¤ºç”¨ã«ã€Œã‚¢ãƒ³ã‚³ãƒ¼ãƒ«ã€ã®æ–‡å­—ãŒé‡è¤‡ã—ãªã„ã‚ˆã†ã«èª¿æ•´
                const encoreText = (encoreRadio.value !== 'none') ? ` (${encoreLabel})` : '';
                previewHtml += `<li>${songTitle}${isMedley}${encoreText}</li>`;
            }
        });

        if (!hasSong) { alert('æ›²ã‚’1æ›²ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„ã€‚'); return; }
        previewHtml += '</ol>';

        const imagePreview = document.getElementById('image-preview');
        if (imagePreview.style.display !== 'none') {
            previewHtml += `<h3>æ·»ä»˜ç”»åƒ</h3><img id="confirmation-image-preview" src="${imagePreview.src}">`;
        }

        document.getElementById('confirmation-preview').innerHTML = previewHtml;
        document.getElementById('modal-overlay').style.display = 'block';
    }

    function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }

    // ãƒ‡ãƒ¼ã‚¿é€ä¿¡ (POST)
    function submitData() {
        const submitBtn = document.getElementById('submit-button');
        submitBtn.disabled = true;
        submitBtn.textContent = 'æŠ•ç¨¿ä¸­...';
        showLoader('æŠ•ç¨¿ä¸­...');

        const liveIndex = document.getElementById('live-select').value;
        const formData = {
            liveInfo: sheetData.liveInfo[liveIndex],
            submitter: document.getElementById('submitter-name').value,
            songs: []
        };
        
        document.querySelectorAll('.song-entry').forEach(entry => {
            const title = entry.querySelector('.song-select').value;
            if (title) {
                formData.songs.push({
                    title: title,
                    isMedley: entry.querySelector('.is-medley').checked,
                    encore: entry.querySelector('input[name^="encore-radio"]:checked').value
                });
            }
        });
        
        const canvas = document.getElementById('image-canvas');
        if (canvas.width > 0 && document.getElementById('image-preview').style.display !== 'none') { 
            const imageDataUrl = canvas.toDataURL('image/jpeg', 0.7);
            const [header, data] = imageDataUrl.split(',');
            formData.imageData = {
                mimeType: header.match(/:(.*?);/)[1],
                data: data
            };
        }

        fetch(GAS_API_URL, {
          method: 'POST',
          body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then(result => {
           if(result.status === 'success') {
             onSuccess(result.message);
           } else {
             throw new Error(result.message);
           }
        })
        .catch(error => {
           onFailure(error);
        });
    }

    function onFailure(error) {
        hideLoader();
        alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
        const submitBtn = document.getElementById('submit-button');
        submitBtn.disabled = false;
        submitBtn.textContent = 'ã“ã®å†…å®¹ã§æŠ•ç¨¿ã™ã‚‹';
    }
    
    function onSuccess(message) {
      closeModal();
      hideLoader();
      resetForm(); 
      const successMessageEl = document.getElementById('success-message');
      successMessageEl.innerHTML = 'æŠ•ç¨¿ãŒå®Œäº†ã—ã¾ã—ãŸã€‚<br>ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼<br><br>çµæœã¯ç²¾æŸ»ã®ã†ãˆã€å¾Œæ—¥ã€<a href="https://x.com/noki_dochibi/status/1977296153512398850?s=46&t=M9RS39PWU4T9DrG7RpQmEA" target="_blank" rel="noopener noreferrer">Love Like Data Base</a>ã€ã«åæ˜ ã•ã›ã¦ã„ãŸã ãã¾ã™ğŸ˜Š';
      document.getElementById('success-modal-overlay').style.display = 'block';
    }
    
    function closeSuccessModal() { document.getElementById('success-modal-overlay').style.display = 'none'; }

    function resetForm() {
        const submitBtn = document.getElementById('submit-button');
        submitBtn.disabled = false;
        submitBtn.textContent = 'ã“ã®å†…å®¹ã§æŠ•ç¨¿ã™ã‚‹';
        document.getElementById('setlist-form').reset();
        document.getElementById('live-details').style.display = 'none';
        document.getElementById('image-preview').style.display = 'none';
        const canvas = document.getElementById('image-canvas');
        canvas.width = 0; canvas.height = 0; // canvasãƒªã‚»ãƒƒãƒˆ

        const container = document.getElementById('setlist-container');
        while (container.firstChild) container.removeChild(container.firstChild);
        addSongEntry();
    }

    function showLoader(message) {
      document.getElementById('loader-message').textContent = message;
      document.getElementById('loader').style.display = 'block';
    }
    function hideLoader() { document.getElementById('loader').style.display = 'none'; }
  </script>
</body>
</html>
